#!/usr/bin/env bash
set -euo pipefail

SOURCE_PATH="${BASH_SOURCE[0]}"
if command -v realpath >/dev/null 2>&1; then
  SOURCE_PATH="$(realpath "${SOURCE_PATH}")"
else
  while [[ -L "${SOURCE_PATH}" ]]; do
    TARGET_PATH="$(readlink "${SOURCE_PATH}")"
    if [[ "${TARGET_PATH}" != /* ]]; then
      SOURCE_PATH="$(cd "$(dirname "${SOURCE_PATH}")" && pwd)/${TARGET_PATH}"
    else
      SOURCE_PATH="${TARGET_PATH}"
    fi
  done
fi
SCRIPT_DIR="$(cd "$(dirname "${SOURCE_PATH}")" && pwd)"
# Source the core implementation so the CLI stays thin.
# shellcheck source=../src/theme-manager.sh
source "${SCRIPT_DIR}/../src/theme-manager.sh"

main "$@"
